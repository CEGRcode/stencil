"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[800],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=d(n),m=r,g=p["".concat(s,".").concat(m)]||p[m]||u[m]||l;return n?o.createElement(g,a(a({ref:t},c),{},{components:n})):o.createElement(g,a({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,a=new Array(l);a[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,a[1]=i;for(var d=2;d<l;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1493:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return c},default:function(){return p}});var o=n(3117),r=n(102),l=(n(7294),n(3905)),a=["components"],i={sidebar_position:2,id:"install",title:"Dependency Installation",sidebar_label:"Install Dependencies"},s="Install dependencies",d={unversionedId:"Getting Started/install",id:"Getting Started/install",title:"Dependency Installation",description:"MacOS using homebrew",source:"@site/docs/Getting Started/install.md",sourceDirName:"Getting Started",slug:"/Getting Started/install",permalink:"/stencil/docs/Getting Started/install",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/Getting Started/install.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,id:"install",title:"Dependency Installation",sidebar_label:"Install Dependencies"},sidebar:"tutorialSidebar",previous:{title:"Quickstart",permalink:"/stencil/docs/Getting Started/quick"},next:{title:"Production deployment",permalink:"/stencil/docs/Getting Started/deploy"}},c=[{value:"MacOS using homebrew",id:"macos-using-homebrew",children:[{value:"Install NodeJS",id:"install-nodejs",children:[],level:3},{value:"Install MongoDB",id:"install-mongodb",children:[],level:3}],level:2},{value:"CentOS 8 setup",id:"centos-8-setup",children:[{value:"Install NodeJS",id:"install-nodejs-1",children:[],level:3},{value:"Install MongoDB",id:"install-mongodb-1",children:[{value:"Install MongoDB",id:"install-mongodb-2",children:[],level:4},{value:"Configure server to start MongoDB on system reboot",id:"configure-server-to-start-mongodb-on-system-reboot",children:[],level:4},{value:"Configure SELinux policy to allow MongoDB to check system memory",id:"configure-selinux-policy-to-allow-mongodb-to-check-system-memory",children:[],level:4},{value:"Install new mongoDB policy exception",id:"install-new-mongodb-policy-exception",children:[],level:4},{value:"Configure SELinux policy to allow MongoDB to report on real-time system usage",id:"configure-selinux-policy-to-allow-mongodb-to-report-on-real-time-system-usage",children:[],level:4},{value:"Install new mongoDB policy exception",id:"install-new-mongodb-policy-exception-1",children:[],level:4},{value:"Start MongoDB server now",id:"start-mongodb-server-now",children:[],level:4},{value:"Convenient commands for mongoDB",id:"convenient-commands-for-mongodb",children:[{value:"Check status of MongoDB",id:"check-status-of-mongodb",children:[],level:5},{value:"Turn off MongoDB",id:"turn-off-mongodb",children:[],level:5},{value:"Restart MongoDB",id:"restart-mongodb",children:[],level:5}],level:4}],level:3},{value:"Firewall configurations",id:"firewall-configurations",children:[],level:3}],level:2}],u={toc:c};function p(e){var t=e.components,n=(0,r.Z)(e,a);return(0,l.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"install-dependencies"},"Install dependencies"),(0,l.kt)("h2",{id:"macos-using-homebrew"},"MacOS using ",(0,l.kt)("a",{parentName:"h2",href:"https://brew.sh/"},"homebrew")),(0,l.kt)("h3",{id:"install-nodejs"},"Install NodeJS"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Requires NodeJS >= 14 (or any latest release)"),(0,l.kt)("li",{parentName:"ul"},"Install from ",(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"here"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"brew install node\n")),(0,l.kt)("h3",{id:"install-mongodb"},"Install MongoDB"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Requires MongoDB >= 5.0"),(0,l.kt)("li",{parentName:"ul"},"Install from ",(0,l.kt)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/administration/install-community/"},"here")),(0,l.kt)("li",{parentName:"ul"},"Add mongoDB Homebrew Tap")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"brew tap mongodb/brew\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Install mongodb community server")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"brew install mongodb-community@5.0\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Before you start MongoDB for the first time, create the directory to which the mongod process will write data. The demo will set it on your ",(0,l.kt)("inlineCode",{parentName:"li"},"~/Desktop")," for simplicity but this is not recommended for production.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"mkdir -p ~/Desktop/data/db\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"To start your mongodb server")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"mongod --dbpath ~/Desktop/data/db\n")),(0,l.kt)("h2",{id:"centos-8-setup"},"CentOS 8 setup"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"These instructions assume sudo rights")),(0,l.kt)("h3",{id:"install-nodejs-1"},"Install NodeJS"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Requires NodeJS >= 14 (or any latest release)"),(0,l.kt)("li",{parentName:"ul"},"Install from ",(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"here"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"# Install Node.js\nsudo dnf module enable nodejs:14\nsudo dnf install nodejs\nsudo npm i -g pm2\n")),(0,l.kt)("h3",{id:"install-mongodb-1"},"Install MongoDB"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Add MongoDB repo to yum repo")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"cat > /etc/yum.repos.d/mongodb-org-5.0.repo <<EOF\n[mongodb-org-5.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/5.0/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc\nEOF\n")),(0,l.kt)("h4",{id:"install-mongodb-2"},"Install MongoDB"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo yum -y install mongodb-org\n")),(0,l.kt)("h4",{id:"configure-server-to-start-mongodb-on-system-reboot"},"Configure server to start MongoDB on system reboot"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo systemctl enable mongod\n")),(0,l.kt)("h4",{id:"configure-selinux-policy-to-allow-mongodb-to-check-system-memory"},"Configure SELinux policy to allow MongoDB to check system memory"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo yum install checkpolicy\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"cat > mongodb_cgroup_memory.te <<EOF\nmodule mongodb_cgroup_memory 1.0;\nrequire {\n      type cgroup_t;\n      type mongod_t;\n      class dir search;\n      class file { getattr open read };\n}\n#============= mongod_t ==============\nallow mongod_t cgroup_t:dir search;\nallow mongod_t cgroup_t:file { getattr open read };\nEOF\n")),(0,l.kt)("h4",{id:"install-new-mongodb-policy-exception"},"Install new mongoDB policy exception"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"checkmodule -M -m -o mongodb_cgroup_memory.mod mongodb_cgroup_memory.te\nsemodule_package -o mongodb_cgroup_memory.pp -m mongodb_cgroup_memory.mod\nsudo semodule -i mongodb_cgroup_memory.pp\n")),(0,l.kt)("h4",{id:"configure-selinux-policy-to-allow-mongodb-to-report-on-real-time-system-usage"},"Configure SELinux policy to allow MongoDB to report on real-time system usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"cat > mongodb_proc_net.te <<EOF\nmodule mongodb_proc_net 1.0;\nrequire {\n        type sysctl_net_t;\n        type mongod_t;\n        class dir search;\n        class file { getattr open read };\n}\n#============= mongod_t ==============\n#!!!! This avc is allowed in the current policy\nallow mongod_t sysctl_net_t:dir search;\nallow mongod_t sysctl_net_t:file open;\n#!!!! This avc is allowed in the current policy\nallow mongod_t sysctl_net_t:file { getattr read };\nEOF\n")),(0,l.kt)("h4",{id:"install-new-mongodb-policy-exception-1"},"Install new mongoDB policy exception"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"checkmodule -M -m -o mongodb_proc_net.mod mongodb_proc_net.te\nsemodule_package -o mongodb_proc_net.pp -m mongodb_proc_net.mod\nsudo semodule -i mongodb_proc_net.pp\n")),(0,l.kt)("h4",{id:"start-mongodb-server-now"},"Start MongoDB server now"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo systemctl start mongod\n")),(0,l.kt)("h4",{id:"convenient-commands-for-mongodb"},"Convenient commands for mongoDB"),(0,l.kt)("h5",{id:"check-status-of-mongodb"},"Check status of MongoDB"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo systemctl status mongod\n")),(0,l.kt)("h5",{id:"turn-off-mongodb"},"Turn off MongoDB"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo systemctl stop mongod\n")),(0,l.kt)("h5",{id:"restart-mongodb"},"Restart MongoDB"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo systemctl restart mongod\n")),(0,l.kt)("h3",{id:"firewall-configurations"},"Firewall configurations"),(0,l.kt)("p",null,"CentOS 8 closes most ports to the public by default. Firewall exceptions should be added for the STENCIL frontend to be publicly visible and for the frontend to communicate to the backend. These ports exceptions should be changed if STENCIL is hosted through other ports."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo firewall-cmd --zone=public --permanent --add-port 8081/tcp\nsudo firewall-cmd --zone=public --permanent --add-port 3000/tcp\nsudo firewall-cmd --reload\n")))}p.isMDXComponent=!0}}]);