"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[625],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,k=u["".concat(p,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(k,l(l({ref:t},s),{},{components:n})):a.createElement(k,l({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6259:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:1,id:"deploystart",title:"Deployment preparations",sidebar_label:"Deployment preparations"},l=void 0,i={unversionedId:"Production Deployment/CentOS 8/deploystart",id:"Production Deployment/CentOS 8/deploystart",title:"Deployment preparations",description:"---",source:"@site/docs/Production Deployment/CentOS 8/deploystart.md",sourceDirName:"Production Deployment/CentOS 8",slug:"/Production Deployment/CentOS 8/deploystart",permalink:"/stencil/docs/Production Deployment/CentOS 8/deploystart",draft:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/Production Deployment/CentOS 8/deploystart.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"deploystart",title:"Deployment preparations",sidebar_label:"Deployment preparations"},sidebar:"tutorialSidebar",previous:{title:"Docker",permalink:"/stencil/docs/Production Deployment/docker"},next:{title:"Backend deployment",permalink:"/stencil/docs/Production Deployment/CentOS 8/deployback"}},p={},d=[{value:"Deploying the application",id:"deploying-the-application",level:2},{value:"Install NodeJS",id:"install-nodejs",level:2},{value:"Update the NPM package manager",id:"update-the-npm-package-manager",level:4},{value:"Clone the repo",id:"clone-the-repo",level:2},{value:"Updating STENCIL dependencies",id:"updating-stencil-dependencies",level:4},{value:"Update sampleData for POSTing to backend",id:"update-sampledata-for-posting-to-backend",level:2},{value:"Learn More",id:"learn-more",level:2}],s={toc:d};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"deploying-the-application"},"Deploying the application"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"These instructions assume a clean build of CentOS 8 with none of the dependencies installed.")),(0,r.kt)("p",null,"The instructions here have been tested for a server running ",(0,r.kt)("inlineCode",{parentName:"p"},"CentOS 8"),". However, all the app related configuration and deployment should be generally valid for any linux distribution. Install relevant dependencies based on respective distros."),(0,r.kt)("h2",{id:"install-nodejs"},"Install NodeJS"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Requires NodeJS >= 16 (or any latest release)"),(0,r.kt)("li",{parentName:"ul"},"Install from ",(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"here"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Install Node.js\nsudo dnf -y module enable nodejs:16\nsudo dnf -y install nodejs\n")),(0,r.kt)("h4",{id:"update-the-npm-package-manager"},"Update the NPM package manager"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo npm install -g npm\n")),(0,r.kt)("h2",{id:"clone-the-repo"},"Clone the repo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/CEGRcode/stencil.git\n")),(0,r.kt)("h4",{id:"updating-stencil-dependencies"},"Updating STENCIL dependencies"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Before deployment to a production environment, all STENCIL dependencies should be updated to reduce risk of using compromised repositories"),(0,r.kt)("li",{parentName:"ul"},"To get a list of packages that are outdated, execute the below command from the STENCIL project root directory",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"npm outdated")))),(0,r.kt)("li",{parentName:"ul"},"From your project root directory, run the update command",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"npm update"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cd stencil/backend\nnpm update\nnpm install\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cd stencil/frontend\nnpm update\nnpm install\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Updating dependencies sometimes breaks the app, which is expected and common software development. Refer the changelog for the packages that are updated to fix any issues.")),(0,r.kt)("p",null,"More details on above command usage : ",(0,r.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/updating-packages-downloaded-from-the-registry"},"npm docs")),(0,r.kt)("h2",{id:"update-sampledata-for-posting-to-backend"},"Update sampleData for POSTing to backend"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The sampleData by default points to 'localhost'. This needs to be updated to the backend server name for proper access")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"This example uses the artemis.cac.cornell.edu DNS as an example")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Update to HTTP (non-SSL secured)"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"find ~/stencil/backend/sampleData \\( -type d -name .git -prune \\) -o -type f -print0 | xargs -0 sed -i \u2018s/localhost:8081/artemics.cac.cornell.edu:8081/g\u2019\ngrep -ri local ~/stencil/backend/sampleData\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Update to HTTPS (SSL secured)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"find ~/stencil/backend/sampleData \\( -type d -name .git -prune \\) -o -type f -print0 | xargs -0 sed -i \u2018s|http://localhost:8081|https://artemis.cac.cornell.edu:8081|g\u2019\ngrep -ri local ~/stencil/backend/sampleData\n")),(0,r.kt)("h2",{id:"learn-more"},"Learn More"),(0,r.kt)("hr",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Getting started with ",(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/getting-started"},"Create React App documentation"),"."),(0,r.kt)("li",{parentName:"ul"},"To learn React, check out the ",(0,r.kt)("a",{parentName:"li",href:"https://reactjs.org/"},"React documentation"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/code-splitting"},(0,r.kt)("strong",{parentName:"a"},"Code Splitting"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size"},(0,r.kt)("strong",{parentName:"a"},"Analyzing the Bundle Size"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app"},(0,r.kt)("strong",{parentName:"a"},"Making a Progressive Web App"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/advanced-configuration"},(0,r.kt)("strong",{parentName:"a"},"Advanced Configuration"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/deployment"},(0,r.kt)("strong",{parentName:"a"},"Deployment"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify"},(0,r.kt)("strong",{parentName:"a"},(0,r.kt)("inlineCode",{parentName:"strong"},"build")," fails to minify"))),(0,r.kt)("li",{parentName:"ul"},"Guide to install ",(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/"},(0,r.kt)("inlineCode",{parentName:"a"},"node"))," (stable version) for ",(0,r.kt)("inlineCode",{parentName:"li"},"CentOS"),", here is a ",(0,r.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-a-centos-7-server"},"tutorial"),"."),(0,r.kt)("li",{parentName:"ul"},"Guide to install ",(0,r.kt)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/"},(0,r.kt)("inlineCode",{parentName:"a"},"mongodb"))," on the ",(0,r.kt)("inlineCode",{parentName:"li"},"CentOS")," server.")))}c.isMDXComponent=!0}}]);